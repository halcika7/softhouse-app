# Softhouse full stack web application
##### User can login with username/email and password or can use github to make an account. 
##### User can search  github users by github username and save info about them
##### After saving data to a file user can download it from the server
___

## Tech used


##### Frontend
* React.js
* React Router
* Redux
* Redux Thunk - for async actions
* Reselect
* Styled Components

##### Backend
* Node.js
* Express
* Passport
* MongoDB with mongoose

---

## Installation

##### I will use yarn package manager instead of npm (not just because I prefer yarn)
##### I was not able to install recharts using npm because this project uses React.js v17 and recharts asks for 15 to 16 versions. Anyways with yarn it works.

##### How to install yarn
* For Mac using brew ---> brew install yarn  or MacPorts ---> sudo port install yarn
* For Windows there is installer on Yarn website
* Ubuntu sudo apt update && sudo apt install yarn

```
git clone git@github.com:halcika7/softhouse-app.git file-name
cd file-name
yarn install-dep
```

**Next we need to populate .env files**

* In backend directory rename .env.example to .env
* Populate .env file
* MongoDB Atlas gives free tier

**Go to MongoDB Atlas website**
* Make new account
* Click button Create a new cluster
* Choose free option
* After the cluster is created go to Clusters section
* Click connect
* Then select connect using MongoDB Compass
* Make user and remember password
* Copy URL and change <password> with password you choose

**Now go back to .env file**

* Replace "/* MONGO_DB_URI  */" with copied URL from MongoDB Atlas
* Next step is to get Github Client ID and Secret
* Go to your github settings
* Next click on Developer Settings on left the hand side
* Then click on OAuth Apps and then New OAuth app
* Fill the fields
* For development Homepage Url should be BACKEND_URL from .env + /api/auth/github
* And callback BACKEND_URL/api/auth/github/callback
* Click Register application
* Then it wil take you to new screen
* There is Client ID
* To get Client Secret click "generate a new client secret"
* Now you can add them to the .env file

**For now we are finished with backend part, now go to frontend directory**

* Inside this directory go to .env file
* Change REACT_APP_BACKEND_URL to match BACKEND_URL from previous file

**Now we are done with setting up env files**

##### Start project in development mode

```
cd path_to_project
yarn dev
```


## Deployment

**In this example I will use Netlify to deploy React app and Heroku for server deployment**

#### Heroku Setup
* Don't have an  account ? Visit website and make one
* Open up project directory in VS Code
* If you are on windows change default integrated terminal to git bash
* Next open integrated terminal

```
heroku login

// It wil ask you to authorize in browser
// If you prefer terminal use heroku login -i
// After authorization

heroku create your_app_name
heroku git:remote -a your_app_name

//app is created and url will be https://your_app_name.herokuapp.com
```

* At the root of the directory open .env.production file
* Change GITHUB_CALLBACK=https://your_app_name.herokuapp.com/api/auth/github/callback
* Then go to netlify.toml file at the same level
* Change REACT_APP_BACKEND_URL=https://your_app_name.herokuapp.com
* Go to github developer settings and change urls from localhost to heroku url
* Next initialize Github repository
* Connect project with github
* Add .env.production file to .gitignore
* Push files to github
* Populate other fields in .env.production
* Most of them you can use from local configuration except URL (Netlify Url)

**Stay with me, only few more steps :)**

#### Netlify Setup

* Make Netlify account and login
* Choose make New site from Git
* Connect project with Netlify
* Now you can see random url generated by Netlify
* Next change URL=with_netlify_url
* Setting up netlify is finished
* In few moments it should be deployed

#### One more step

* Open integrated terminal

```
// run following command
// this will set Heroku Environment variables
// from .env.production file
git push heroku master
// or
git push heroku HEAD:master
//then
bash heroku.env.sh
```

* This command should restart node server
* Visit deployed Netlify website
* Enjoy
